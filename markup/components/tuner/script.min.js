!function(a){"use strict";a(function(){function b(b,c,d,e){a.ajax({url:c||"/bitrix/components/bejetstore/tuner/ajax.php",type:d||"GET",dataType:"json",data:e.attr("name")+"="+b,success:function(c){c&&c.RELOAD&&"Y"===c.RELOAD?document.location.reload(!0):c&&c.STATUS&&"Y"===c.STATUS&&(a("style.tuner-color").remove(),a("body").append('<style class="tuner-color">'+c.RESULT+"</style>"),e.val(b))},error:function(a,b,c){window.console&&(console.log(a),console.log(b),console.log(c))}})}function c(b,c,d,e,f){a.ajax({url:d||"/bitrix/components/bejetstore/tuner/ajax.php",type:e||"GET",dataType:"json",data:f.attr("name")+"="+b,success:function(d){d&&d.RELOAD&&"Y"===d.RELOAD?document.location.reload(!0):d&&d.STATUS&&"Y"===d.STATUS&&(a("style.tuner-tags").remove(),a("body").append('<style class="tuner-tags">'+d.RESULT+"</style>"),a("#global-"+c+"-color").val(b))},error:function(a,b,c){window.console&&(console.log(a),console.log(b),console.log(c))}})}Cookies.remove("sellerTuner"),a(".b-seller-tuner__menu, .b-seller-tuner__content").niceScroll({cursorcolor:"#dddddd",cursorwidth:"7px",railoffset:"100px"}),a("#seller-tuner-icon").sideNav({onOpen:function(b){a(".b-seller-tuner").addClass("i-open"),setTimeout(function(){a(".b-seller-tuner__content .i-active").addClass("i-anim")},400),setTimeout(function(){a("#seller-tuner").removeClass("i-no-transition")},500),Cookies.set("tunerOpen","Y"),Cookies.get("tunerScroll")&&a(".b-seller-tuner__content").scrollTo(Cookies.get("tunerScroll"))},onClose:function(){a(".b-seller-tuner").removeClass("i-open"),a(".b-seller-tuner__content .i-anim").removeClass("i-anim"),Cookies.set("tunerOpen","N")}}),a("#seller-tuner").hasClass("i-no-transition")&&a("#seller-tuner-icon").sideNav("show");var d={preview:!0,hue:!0,interaction:{input:!0,clear:!0,save:!0}},e=window.colorpickerStrings||{save:"Сохранить",clear:"Очистить"};if(a(".b-seller-tuner__colors-1 .b-colorpicker, .b-seller-tuner__colors-2 .b-colorpicker").click(function(){var b=a(this);b.offset().left-a(".b-seller-tuner__content").offset().left<180?b.find(".pcr-app").css({left:-1*(b.offset().left-a(".b-seller-tuner__content").offset().left)+"px"}):a(".b-seller-tuner__content").offset().left+a(".b-seller-tuner__content").width()-(b.offset().left+b.width())<180&&b.find(".pcr-app").css({left:-1*(370-(a(".b-seller-tuner__content").offset().left+a(".b-seller-tuner__content").width()-b.offset().left))+"px"})}),a(".b-tag-color").click(function(){var b=a(this),c=b.closest(".b-item");c.offset().left-a(".b-seller-tuner__content").offset().left<180?b.find(".pcr-app").css({left:-1*(c.offset().left-a(".b-seller-tuner__content").offset().left)+"px"}):a(".b-seller-tuner__content").offset().left+a(".b-seller-tuner__content").width()-(c.offset().left+c.width())<180&&b.find(".pcr-app").css({left:-1*(370-(a(".b-seller-tuner__content").offset().left+a(".b-seller-tuner__content").width()-c.offset().left))+"px"})}),a(".b-seller-tuner__colors-1 .b-colorpicker div").length){var f=!0;Pickr.create({el:".b-seller-tuner__colors-1 .b-colorpicker div",default:a(".b-seller-tuner__colors-1 .b-colorpicker").data("default"),onSave:function(c){var d;if(f&&c)d=c.toRGBA(),(.8*d[0]+d[1]+.2*d[2])/510*100<50?a(".b-seller-tuner__colors-1 .pcr-button").addClass("i-dark"):a(".b-seller-tuner__colors-1 .pcr-button").removeClass("i-dark");else if(!f){var e=a(".b-seller-tuner__colors-1").data("ajax-url"),g=a(".b-seller-tuner__colors-1").data("ajax-method");if(c)d=c.toRGBA(),a("#seller-tuner .b-seller-tuner__colors-1 .b-seller-tuner__block .b-item").removeClass("i-active"),b(d.toString().split(" ").join(""),e,g,a("#global-color-1")),(.8*d[0]+d[1]+.2*d[2])/510*100<50?a(".b-seller-tuner__colors-1 .pcr-button").addClass("i-dark"):a(".b-seller-tuner__colors-1 .pcr-button").removeClass("i-dark");else{var h=a(".b-seller-tuner__colors-1 .b-colorpicker").data("default");b(h,e,g,a("#global-color-1")),a(".b-seller-tuner__colors-1 .pcr-button").css({background:"#"+h}),(.8*parseInt(h.substring(0,2))+parseInt(h.substring(2,4))+.2*parseInt(h.substring(4,6)))/510*100<50?a(".b-seller-tuner__colors-1 .pcr-button").addClass("i-dark"):a(".b-seller-tuner__colors-1 .pcr-button").removeClass("i-dark")}}f=!1},components:d,strings:e})}if(a(".b-seller-tuner__colors-2 .b-colorpicker div").length){var g=!0;Pickr.create({el:".b-seller-tuner__colors-2 .b-colorpicker div",default:a(".b-seller-tuner__colors-2 .b-colorpicker").data("default"),onSave:function(c){var d;if(g&&c)d=c.toRGBA(),(.8*d[0]+d[1]+.2*d[2])/510*100<50?a(".b-seller-tuner__colors-2 .pcr-button").addClass("i-dark"):a(".b-seller-tuner__colors-2 .pcr-button").removeClass("i-dark");else if(!g){var e=a(".b-seller-tuner__colors-2").data("ajax-url"),f=a(".b-seller-tuner__colors-2").data("ajax-method");if(c)d=c.toRGBA(),a("#seller-tuner .b-seller-tuner__colors-2 .b-seller-tuner__block .b-item").removeClass("i-active"),b(d.toString().split(" ").join(""),e,f,a("#global-color-2")),(.8*d[0]+d[1]+.2*d[2])/510*100<50?a(".b-seller-tuner__colors-2 .pcr-button").addClass("i-dark"):a(".b-seller-tuner__colors-2 .pcr-button").removeClass("i-dark");else{var h=a(".b-seller-tuner__colors-2 .b-colorpicker").data("default");b(h,e,f,a("#global-color-2")),a(".b-seller-tuner__colors-2 .pcr-button").css({background:"#"+h}),(.8*parseInt(h.substring(0,2))+parseInt(h.substring(2,4))+.2*parseInt(h.substring(4,6)))/510*100<50?a(".b-seller-tuner__colors-2 .pcr-button").addClass("i-dark"):a(".b-seller-tuner__colors-2 .pcr-button").removeClass("i-dark")}}g=!1},components:d,strings:e})}var h=[];a(".b-seller-tuner__tags .b-item").each(function(b){var f=a(this),g=f.data("tag"),i=f.find("input:hidden");if(a(".b-seller-tuner__tags .b-item.i-"+g+" .b-colorpicker div").length){h[b]=!0;Pickr.create({el:".b-seller-tuner__tags .b-item.i-"+g+" .b-colorpicker div",default:f.find(".b-colorpicker").data("default"),onSave:function(d){if(!h[b]){a(".b-seller-tuner__tags .i-"+g+" .b-colorpicker").css({background:"transparent"});var e=a(".b-seller-tuner__tags").data("ajax-url"),f=a(".b-seller-tuner__tags").data("ajax-method");if(d){var j=d.toRGBA();c(j.toString().split(" ").join(""),g,e,f,i),(.8*j[0]+j[1]+.2*j[2])/510*100<50?a(".b-seller-tuner__tags .i-"+g+" .pcr-button").addClass("i-dark"):a(".b-seller-tuner__tags .i-"+g+" .pcr-button").removeClass("i-dark")}else{var k=a(".i-"+g+" .b-colorpicker").data("default");c(k,g,e,f,i),a(".b-seller-tuner__tags .i-"+g+" .pcr-button").css({background:"#"+k}),(.8*parseInt(k.substring(0,2))+parseInt(k.substring(2,4))+.2*parseInt(k.substring(4,6)))/510*100<50?a(".b-seller-tuner__tags .i-"+g+" .pcr-button").addClass("i-dark"):a(".b-seller-tuner__tags .i-"+g+" .pcr-button").removeClass("i-dark")}}h[b]=!1},components:d,strings:e})}}),a(".b-seller-tuner__menu a").click(function(b){b.preventDefault(),a(".b-seller-tuner__menu a").removeClass("i-active"),a(this).addClass("i-active"),a(".b-seller-tuner__content [data-tab]").removeClass("i-active").removeClass("i-anim");var c=a(this).attr("href"),d=a(".b-seller-tuner__content [data-tab="+c+"]");d.addClass("i-active"),setTimeout(function(){d.addClass("i-anim")},50)}),a("#seller-tuner .b-seller-tuner-close").click(function(b){b.preventDefault(),a("#seller-tuner-icon").sideNav("hide")}),a("#seller-tuner .b-seller-tuner__colors-1 .b-seller-tuner__block .b-item, #seller-tuner .b-seller-tuner__colors-2 .b-seller-tuner__block .b-item").click(function(c){c.preventDefault();var d=a(this),e=d.closest("section");a(this).closest(".b-seller-tuner__block").find(".b-item").removeClass("i-active"),d.addClass("i-active"),b(d.css("backgroundColor").split(" ").join(""),e.data("ajax-url"),e.data("ajax-method"),e.find('input[ name^="global-color" ]'))}),a("#seller-tuner .b-seller-tuner__fonts .b-seller-tuner__block div, #seller-tuner .b-seller-tuner__font-size .b-seller-tuner__block div").click(function(b){b.preventDefault();var c=a(this),d=c.data("font-size")||c.text(),e=c.closest(".b-seller-tuner__block").find("input:hidden"),f=c.closest("[class^=b-seller-tuner__font]"),g="font-size";f.is(".b-seller-tuner__fonts")&&(g="fonts"),f.find("div").removeClass("i-active"),c.addClass("i-active"),a.ajax({url:f.data("ajax-url")||"/bitrix/components/bejetstore/tuner/ajax.php",type:f.data("ajax-method")||"GET",dataType:"json",data:e.attr("name")+"="+d,success:function(b){b&&b.RELOAD&&"Y"===b.RELOAD?(Cookies.set("tunerTab",a(".b-seller-tuner__content .i-active[data-tab]").data("tab")),Cookies.set("tunerScroll",a(".b-seller-tuner__content").scrollTop()),document.location.reload(!0)):b&&b.STATUS&&"Y"===b.STATUS&&(a("style.tuner-"+g).remove(),a("body").append('<style class="tuner-'+g+'">'+b.RESULT+"</style>"),e.val(d))},error:function(a,b,c){window.console&&(console.log(a),console.log(b),console.log(c))}})}),a("#seller-tuner .b-seller-tuner__screen-width .b-seller-tuner__block div").click(function(b){b.preventDefault();var c=a(this),d=String(c.text()).split(" ").join(""),e=c.closest(".b-seller-tuner__block").find("input:hidden"),f=c.closest("[class^=b-seller-tuner__screen-width]");f.find("div").removeClass("i-active"),c.addClass("i-active"),a.ajax({url:f.data("ajax-url")||"/bitrix/components/bejetstore/tuner/ajax.php",type:f.data("ajax-method")||"GET",dataType:"json",data:e.attr("name")+"="+d,success:function(b){b&&b.RELOAD&&"Y"===b.RELOAD?(Cookies.set("tunerTab",a(".b-seller-tuner__content .i-active[data-tab]").data("tab")),Cookies.set("tunerScroll",a(".b-seller-tuner__content").scrollTop()),document.location.reload(!0)):b&&b.STATUS&&"Y"===b.STATUS&&(a("style.tuner-width").remove(),a("body").append('<style class="tuner-width">'+b.RESULT+"</style>"),e.val(d))},error:function(a,b,c){window.console&&(console.log(a),console.log(b),console.log(c))}})}),a(".b-seller-tuner__headers .b-seller-tuner__img").click(function(b){b.preventDefault();var c=a(".b-seller-tuner__headers"),d=a("#headers"),e=a(this).data("value");d.val(e),a.ajax({url:c.data("ajax-url")||"/bitrix/components/bejetstore/tuner/ajax.php",type:c.data("ajax-method")||"GET",dataType:"json",data:d.attr("name")+"="+e,success:function(a){a&&a.RELOAD&&"Y"===a.RELOAD&&document.location.reload(!0)},error:function(a,b,c){window.console&&(console.log(a),console.log(b),console.log(c))}})}),setTimeout(function(){a(".b-seller-tuner__colors-1 .b-colorpicker, .b-seller-tuner__colors-2 .b-colorpicker").each(function(){var b=a(this);b.offset().left-a(".b-seller-tuner__content").offset().left<180?b.find(".pcr-app").css({left:-1*(b.offset().left-a(".b-seller-tuner__content").offset().left)+"px"}):a(".b-seller-tuner__content").offset().left+a(".b-seller-tuner__content").width()-(b.offset().left+b.width())<180&&b.find(".pcr-app").css({left:-1*(370-(a(".b-seller-tuner__content").offset().left+a(".b-seller-tuner__content").width()-b.offset().left))+"px"})}),a(".b-tag-color").each(function(){var b=a(this),c=b.closest(".b-item");c.offset().left-a(".b-seller-tuner__content").offset().left<180?b.find(".pcr-app").css({left:-1*(c.offset().left-a(".b-seller-tuner__content").offset().left)+"px"}):a(".b-seller-tuner__content").offset().left+a(".b-seller-tuner__content").width()-(c.offset().left+c.width())<180&&b.find(".pcr-app").css({left:-1*(370-(a(".b-seller-tuner__content").offset().left+a(".b-seller-tuner__content").width()-c.offset().left))+"px"})})},2e3)})}(jQuery);